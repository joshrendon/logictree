#!/usr/bin/env bash
rg -n '^\s*(class|def)\s' src/logictree \
| awk -F: 'BEGIN{OFS=":"} {file=$1; line=$2; $1=""; $2=""; sub(/^::/,""); print file,line,$0}' \
| while IFS=: read -r f l rest; do
  printf "\033[1m%s:%s\033[0m %s\n" "$f" "$l" "$rest"
  bat --color=always --style=plain -r "$l:$l" "$f"
  echo
done | less -R
